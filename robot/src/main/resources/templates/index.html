<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>后厨点餐数据</title>
<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
<style>
     body{background: #F8F9FB;}
    .title{background: #18499D;height: 50px;line-height: 50px;text-align:center;font-size:20px;color:#fff; }
    .table{width: 99%;margin:0px auto;border-radius: 10px;background:#fff;}
    .table thead tr{background: #F8F9FB;}
    .table thead tr th,.table tbody tr td{border-left:0px;border-right: 0px;text-indent:15%;}
</style>
</head>
<body>
<div id="app">
  <h5 class="title">后厨点餐数据</h5>  
  <table class="table table-hover table-bordered" border="1">
  	<thead class="">
      <tr>
         <th>桌号</th>
         <th>菜品</th>
         <th>下单</th>
      </tr>
    </thead>
    <tbody>
        <tr v-for="item in list">
            <td>{{item.tableNo}}</td>
            <td>{{item.dishName}}</td>
            <td>{{item.status}}</td>
        </tr>
    </tbody>
  </table>
</div>

<script>

    /*<![CDATA[*/
    ctxPath = /*[[@{/}]]*/ '';
    /*]]>*/
    var url = ctxPath + 'order/list?status=0';

var v = new Vue({
	el: '#app',
	data: {
	    list: []

	},

    mounted() {
        this.getdata()
    },
    methods: {
        getdata: function(item){
            const ths = this;
            clearTimeout(ths.timer);
            axios.post(url)
                .then(response => {
                    console.log(response);
                    var obj = response.data.obj;
                    for(i=0;i<obj.length;i++){
                        if(obj[i]["status"]==1){obj[i]["status"]='配餐'}
                        else if(obj[i]["status"]==2){obj[i]["status"]='放盘'}
                        else if(obj[i]["status"]==3){obj[i]["status"]='运输中'}
                        else if(obj[i]["status"]==4){obj[i]["status"]='用户确认'}
                    }
                    ths.list = obj;
                   
                    console.log(ths.list);
            })
            ths.timer =  setTimeout(() => {
                    ths.getdata()//10秒执行
            }, 10000);
            
        }
    },
})
</script>

</body>
</html>